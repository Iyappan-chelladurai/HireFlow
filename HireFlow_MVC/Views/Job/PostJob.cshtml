@model HireFlow_MVC.Models.JobViewModel

@{
    ViewData["Title"] = "Post Job";
}

<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8">
    <div class="max-w-6xl mx-auto bg-white shadow-2xl rounded-2xl overflow-hidden grid grid-cols-1 md:grid-cols-3">

        <!-- Left: Form -->
        <div class="md:col-span-2 p-8">
            <h1 class="text-3xl font-bold mb-6 text-gray-800">Post a New Job</h1>

            <form asp-action="PostJob" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div asp-validation-summary="ModelOnly" class="text-red-500 col-span-2"></div>
                <input asp-for="JobId" type="hidden" />

                <!-- Job Title -->
                <div class="relative">
                    <label asp-for="JobTitle" class="block text-sm font-semibold text-gray-700"></label>
                    <input asp-for="JobTitle" placeholder="Enter job title"
                        class="mt-1 pl-10 w-full rounded-lg border-gray-300 shadow-sm bg-gray-50 hover:bg-white focus:border-blue-500 focus:ring focus:ring-blue-200 transition" />
                    <span class="absolute left-3 top-9 text-gray-400">
                        <i class="fas fa-briefcase"></i>
                    </span>
                    <span asp-validation-for="JobTitle" class="text-red-500 text-sm"></span>
                </div>

                <!-- Department -->
                <div class="relative">
                    <label asp-for="Department" class="block text-sm font-semibold text-gray-700"></label>
                    <input asp-for="Department" placeholder="e.g. IT, HR, Finance"
                        class="mt-1 pl-10 w-full rounded-lg border-gray-300 shadow-sm bg-gray-50 hover:bg-white focus:border-blue-500 focus:ring focus:ring-blue-200 transition" />
                    <span class="absolute left-3 top-9 text-gray-400">
                        <i class="fas fa-building"></i>
                    </span>
                    <span asp-validation-for="Department" class="text-red-500 text-sm"></span>
                </div>

                <!-- Job Description -->
                <div class="md:col-span-2">
                    <label asp-for="JobDescription" class="block text-sm font-semibold text-gray-700"></label>
                    <textarea asp-for="JobDescription" rows="3" placeholder="Enter job description"
                        class="mt-1 w-full rounded-lg border-gray-300 shadow-sm bg-gray-50 hover:bg-white focus:border-blue-500 focus:ring focus:ring-blue-200 transition"></textarea>
                    <span asp-validation-for="JobDescription" class="text-red-500 text-sm"></span>
                </div>

  
                <!-- Location -->
                <div>
                    <label asp-for="Location" class="block text-sm font-semibold text-gray-700"></label>
                    <input asp-for="Location" placeholder="City, Country"
                        class="mt-1 w-full rounded-lg border-gray-300 shadow-sm bg-gray-50 hover:bg-white focus:border-blue-500 focus:ring focus:ring-blue-200 transition" />
                    <span asp-validation-for="Location" class="text-red-500 text-sm"></span>
                </div>

                <!-- Salary -->
                <div>
                    <label asp-for="Salary" class="block text-sm font-semibold text-gray-700"></label>
                    <input asp-for="Salary" placeholder="e.g. 50000/year"
                        class="mt-1 w-full rounded-lg border-gray-300 shadow-sm bg-gray-50 hover:bg-white focus:border-blue-500 focus:ring focus:ring-blue-200 transition" />
                    <span asp-validation-for="Salary" class="text-red-500 text-sm"></span>
                </div>

                <!-- Employment Type -->
                <div>
                    <label asp-for="EmploymentType" class="block text-sm font-semibold text-gray-700"></label>
                    <input asp-for="EmploymentType" placeholder="e.g. Full-time, Contract"
                        class="mt-1 w-full rounded-lg border-gray-300 shadow-sm bg-gray-50 hover:bg-white focus:border-blue-500 focus:ring focus:ring-blue-200 transition" />
                    <span asp-validation-for="EmploymentType" class="text-red-500 text-sm"></span>
                </div>

                <!-- Openings -->
                <div>
                    <label asp-for="Openings" class="block text-sm font-semibold text-gray-700"></label>
                    <input asp-for="Openings" placeholder="Number of openings"
                        class="mt-1 w-full rounded-lg border-gray-300 shadow-sm bg-gray-50 hover:bg-white focus:border-blue-500 focus:ring focus:ring-blue-200 transition" />
                    <span asp-validation-for="Openings" class="text-red-500 text-sm"></span>
                </div>

                <!-- Closing Date -->
                <div>
                    <label asp-for="ClosingDate" class="block text-sm font-semibold text-gray-700"></label>
                    <input asp-for="ClosingDate" type="date"
                        class="mt-1 w-full rounded-lg border-gray-300 shadow-sm bg-gray-50 hover:bg-white focus:border-blue-500 focus:ring focus:ring-blue-200 transition" />
                    <span asp-validation-for="ClosingDate" class="text-red-500 text-sm"></span>
                </div>

                <!-- Actions -->
                <div class="flex justify-between md:col-span-2 mt-4">
                    <a asp-action="AllJobs" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition">Back</a>
                    <button type="submit"
                        class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md transform hover:scale-105 transition">
                        Create Job
                    </button>
                </div>
            </form>
        </div>

        <!-- Right: Info Panel -->
        <div class="bg-gradient-to-b from-blue-50 to-blue-100 p-8 flex flex-col justify-between">
            <div>
                <img src="/images/company-logo.png" alt="Company Logo" class="w-32 mb-6 animate-pulse">
                <h2 class="text-xl font-bold text-blue-900 mb-4">Tips for Posting a Job</h2>
                <ul class="space-y-3 text-gray-700 list-disc list-inside">
                    <li> Use a clear, specific job title</li>
                    <li> Mention location & remote options</li>
                    <li> Include salary range</li>
                    <li> Set a clear closing date</li>
                </ul>

                <!-- Company Info Card -->
                <div class="mt-6 p-4 bg-white rounded-lg shadow">
                    <h3 class="font-semibold text-gray-800">Company Info</h3>
                    <p class="text-sm text-gray-600">Your company details will appear here when posting jobs.</p>
                </div>
            </div>

            <div class="mt-8 bg-white p-4 rounded-lg shadow-lg transform hover:scale-[1.02] transition">
                <h3 class="text-lg font-semibold text-gray-800">Live Preview</h3>
                <p class="text-gray-500 text-sm mt-2">Your job post will look like this:</p>
                <div class="mt-3 p-3 border border-gray-200 rounded bg-gray-50 transition-all duration-300">
                    <h4 class="font-bold text-blue-700" id="preview-title">[Job Title]</h4>
                    <p class="text-sm text-gray-600" id="preview-dept">[Department]</p>
                    <p class="text-gray-500 mt-1 text-sm" id="preview-desc">[Short description here]</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        const updatePreview = (selector, target) => {
            document.querySelector(selector).addEventListener('input', e => {
                document.getElementById(target).textContent = e.target.value || document.getElementById(target).dataset.default;
            });
        };
        document.getElementById('preview-title').dataset.default = '[Job Title]';
        document.getElementById('preview-dept').dataset.default = '[Department]';
        document.getElementById('preview-desc').dataset.default = '[Short description here]';

        updatePreview('[name="JobTitle"]', 'preview-title');
        updatePreview('[name="Department"]', 'preview-dept');
        updatePreview('[name="JobDescription"]', 'preview-desc');
    </script>
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
