@model IEnumerable<HireFlow_MVC.Models.JobViewModel>

@{
    var role = Context.Session.GetString("UserRole");
}

<div class="p-6">
    <!-- Page Title & Add Job Button for HR -->
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-3xl font-bold text-gray-800">Available Jobs</h1>

        @if (role == "HR" || role == "Recruiter")
        {
            <a href="@Url.Action("Create", "Job")"
               class="bg-green-600 text-white px-4 py-2 rounded-lg shadow hover:bg-green-700 transition flex items-center gap-2">
                ➕ Add New Job
            </a>
        }
    </div>

    @if (!Model.Any())
    {
        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-md flex items-center gap-3">
            <span class="text-yellow-500 text-lg">⚠️</span>
            <p class="text-yellow-700 font-medium">No jobs found at the moment. Please check back later.</p>
        </div>
    }
    else
    {
        <!-- Job Cards Grid -->
        <div class="grid sm:grid-cols-2 xl:grid-cols-3 gap-6">
            @foreach (var job in Model)
            {
                <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100 hover:border-indigo-300 
                            transition-all duration-300 flex flex-col transform hover:scale-[1.02]">
                    
                    <!-- Job Title -->
                    <h2 class="text-xl font-semibold text-gray-900 mb-3 line-clamp-1">@job.JobTitle</h2>
                    
                    <!-- Job Meta -->
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="flex items-center gap-1 text-xs bg-indigo-50 text-indigo-700 px-2 py-1 rounded-full">
                            📍 @job.Location
                        </span>
                        <span class="flex items-center gap-1 text-xs bg-green-50 text-green-700 px-2 py-1 rounded-full">
                            💰 ₹@job.Salary
                        </span>
                        <span class="flex items-center gap-1 text-xs bg-yellow-50 text-yellow-700 px-2 py-1 rounded-full">
                            🏢 @job.Department
                        </span>
                    </div>

                    <!-- Description -->
                    <p class="text-gray-600 text-sm flex-grow line-clamp-3">
                        @(string.IsNullOrWhiteSpace(job.JobDescription) 
                            ? "No description provided." 
                            : job.JobDescription)
                    </p>

                    <!-- Action Button -->
                    <div class="mt-5">
                        @if (role == "HR" || role == "Recruiter" || role == "Admin")
                        {
                            <a href="@Url.Action("JobDetails", "Job", new { id = job.JobId })"
                               class="block w-full text-center bg-indigo-600 text-white px-4 py-2 rounded-lg font-medium 
                                      hover:bg-indigo-700 transition shadow-sm hover:shadow-md">
                                View Details →
                            </a>
                        }
                        else
                        {
                            <a href="@Url.Action("JobDetails", "Job", new { id = job.JobId })"
                               class="block w-full text-center bg-blue-600 text-white px-4 py-2 rounded-lg font-medium 
                                      hover:bg-blue-700 transition shadow-sm hover:shadow-md">
                                Apply Now →
                            </a>
                        }
                    </div>
                </div>
            }
        </div>
    }
</div>
