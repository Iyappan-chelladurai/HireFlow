@model HireFlow_MVC.Models.JobViewModel

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

<div class="max-w-4xl mx-auto mt-10 p-6 bg-white shadow-xl rounded-2xl border border-gray-200">
    <div class="flex justify-between items-start mb-6">
        <div>
            <h1 class="text-3xl font-bold">@Model.JobTitle</h1>
            <p class="text-gray-500 text-sm mt-1">
                Posted on: @Model.ClosingDate?.AddDays(-20).ToString("dd MMMM yyyy")
            </p>
        </div>
        <span class="px-3 py-1 text-sm rounded-full bg-green-100 text-green-700 font-medium">
            @Model.EmploymentType
        </span>
    </div>

    <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Job Description</h2>
        <p>@Model.JobDescription</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <div><h3 class="font-semibold">Department</h3><p>@Model.Department</p></div>
        <div><h3 class="font-semibold">Location</h3><p>@Model.Location</p></div>
        <div><h3 class="font-semibold">Salary</h3><p>₹@Model.Salary</p></div>
        <div><h3 class="font-semibold">Openings</h3><p>@Model.Openings</p></div>
        <div><h3 class="font-semibold">Closing Date</h3><p>@Model.ClosingDate?.ToString("dd MMMM yyyy")</p></div>
        <div>
            <h3 class="font-semibold">Status</h3>
            <span class="inline-block px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-sm">Active</span>
        </div>
    </div>

    <div class="border-t pt-6 text-right">
        <button onclick="openModal()" class="px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition">
            Apply Now
        </button>
    </div>
</div>

<!-- Modal -->
<div id="applyModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg p-8 relative">
        <h2 class="text-xl font-bold text-indigo-700 mb-4">Apply for @Model.JobTitle</h2>

        <form asp-action="NewApplication" asp-controller="JobApplications" method="post" enctype="multipart/form-data" class="space-y-4">
            <input type="hidden" name="ApplicationId" value="" />
            <input type="hidden" name="JobId" value="@Model.JobId" />
            <input type="hidden" name="CandidateId" value="" />

            <div>
                <label class="block text-sm font-medium mb-1">Current Job Title</label>
                <input type="text" name="CurrentJobTitle" class="w-full border px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" />
            </div>

            <div>
                <label class="block text-sm font-medium mb-1">Total Experience Years</label>
                <input type="number" name="TotalExperienceYears" class="w-full border px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" />
            </div>

            <div>
                <label class="block text-sm font-medium mb-1">Resume</label>
                <input type="file" name="ResumeFile" accept=".pdf,.doc,.docx" class="w-full border px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" />
            </div>

            <div class="flex justify-end space-x-3 pt-4 border-t mt-4">
                <button type="button" onclick="closeModal()" class="bg-gray-200 px-4 py-2 rounded-md text-sm hover:bg-gray-300">Cancel</button>
                <button type="submit" class="bg-indigo-600 px-6 py-2 rounded-md text-white text-sm hover:bg-indigo-700">Submit</button>
            </div>
        </form>

        <button onclick="closeModal()" class="absolute top-3 right-4 text-gray-500 hover:text-gray-800 text-xl font-bold">&times;</button>
    </div>
</div>

<script>
    function openModal() {
        document.getElementById("applyModal").classList.remove("hidden");
    }
    function closeModal() {
        document.getElementById("applyModal").classList.add("hidden");
    }
</script>
